{"remainingRequest":"E:\\Notes_Sharing Study System\\note-front\\node_modules\\babel-loader\\lib\\index.js!E:\\Notes_Sharing Study System\\note-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Notes_Sharing Study System\\note-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Notes_Sharing Study System\\note-front\\src\\views\\notes\\childrens\\NoteCommentItem.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Notes_Sharing Study System\\note-front\\src\\views\\notes\\childrens\\NoteCommentItem.vue","mtime":1672661813677},{"path":"E:\\Notes_Sharing Study System\\note-front\\babel.config.js","mtime":1663921093000},{"path":"E:\\Notes_Sharing Study System\\note-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Notes_Sharing Study System\\note-front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Notes_Sharing Study System\\note-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Notes_Sharing Study System\\note-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgYWRkRGlhbnphbkNvbW1lbnQsIHJlZHVjZURpYW56YW5Db21tZW50IH0gZnJvbSAiQC9uZXR3b3JrL25vdGUvaW5kZXguanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgcHJvcHM6IFsiaXRlbURhdGEiLCAiaXRlbUxpa2UiLCAiaW1nU2l6ZSJdLAoKICBkYXRhKCkgewogICAgcmV0dXJuIHt9OwogIH0sCgogIGNvbXB1dGVkOiB7CiAgICAvKioKICAgICAqIOivpWl0ZW3mmK/lkKbmmK/lrZDor4TorroKICAgICAqLwogICAgaXNDaGlsZCgpIHsKICAgICAgcmV0dXJuIHRoaXMuaXRlbURhdGEubGV2ZWwgIT0gMDsKICAgIH0sCgogICAgaXNMaWtlZCgpIHsKICAgICAgaWYgKCF0aGlzLml0ZW1MaWtlKSByZXR1cm4gIiI7CiAgICAgIHJldHVybiB0aGlzLml0ZW1MaWtlLmlzTGlrZWQgPT0gMSA/ICJhY3RpdmUiIDogIiI7CiAgICB9CgogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRGlhbnphbigpIHsKICAgICAgaWYgKCF0aGlzLmlzTG9naW4oKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygiUGxlYXNlIGxvZ2luIGJlZm9yZSBwcm9jZWVkaW5nIik7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5pdGVtTGlrZS5pc0xpa2VkID09PSAwKSB7CiAgICAgICAgLy8g5b2T5YmN55So5oi36L+Y5pyq57uZ6L+Z56+H56yU6K6w54K56L+H6LWeCiAgICAgICAgYWRkRGlhbnphbkNvbW1lbnQodGhpcy5nZXREaWFuWmFuRHRvKCkpLnRoZW4ocmVzID0+IHsKICAgICAgICAgIGNvbnNvbGUubG9nKHJlcyk7IC8vIOWIt+aWsOaVsOaNrgoKICAgICAgICAgIHRoaXMucmVsb2FkR2V0RGF0YSgpOwogICAgICAgIH0pOwogICAgICB9IGVsc2UgewogICAgICAgIC8vIOW9k+WJjeeUqOaIt+W3sue7j+e7mei/meevh+eslOiusOeCuei/h+i1ngogICAgICAgIHJlZHVjZURpYW56YW5Db21tZW50KHRoaXMuZ2V0RGlhblphbkR0bygpKS50aGVuKHJlcyA9PiB7CiAgICAgICAgICBjb25zb2xlLmxvZyhyZXMpOyAvLyDliLfmlrDmlbDmja4KCiAgICAgICAgICB0aGlzLnJlbG9hZEdldERhdGEoKTsKICAgICAgICB9KTsKICAgICAgfQogICAgfSwKCiAgICBoYW5kbGVSZXBseSgpIHsKICAgICAgdGhpcy4kZW1pdCgicmVwbHlVc2VyIiwgewogICAgICAgIGlkOiB0aGlzLml0ZW1EYXRhLmlkLAogICAgICAgIHVzZXJOYW1lOiB0aGlzLml0ZW1EYXRhLnVzZXJJZCwKICAgICAgICBwYXJlbnRJZDogdGhpcy5pdGVtRGF0YS5wYXJlbnRJZCwKICAgICAgICBub3RlSWQ6IHRoaXMuaXRlbURhdGEubm90ZUlkCiAgICAgIH0pOwogICAgfSwKCiAgICByZWxvYWRHZXREYXRhKCkgewogICAgICB0aGlzLiRlbWl0KCJyZWxvYWRMaWtlRGF0YSIpOwogICAgfSwKCiAgICBpc0xvZ2luKCkgewogICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8gIT09IG51bGw7CiAgICB9LAoKICAgIGdldERpYW5aYW5EdG8oKSB7CiAgICAgIGNvbnN0IG9iaiA9IHsKICAgICAgICB1c2VySWQ6IHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvLnVzZXJpZCwKICAgICAgICBjb21tZW50SWQ6IHRoaXMuaXRlbURhdGEuaWQKICAgICAgfTsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AAoCA,SACAA,iBADA,EAEAC,oBAFA,QAGA,yBAHA;AAIA;EACAC,0CADA;;EAEAC;IACA;EACA,CAJA;;EAKAC;IACA;AACA;AACA;IACAC;MACA;IACA,CANA;;IAOAC;MACA;MACA;IACA;;EAVA,CALA;EAiBAC;IACAC;MACA;QACA;QACA;MACA;;MACA;QACA;QACAR;UACAS,iBADA,CAEA;;UACA;QACA,CAJA;MAKA,CAPA,MAOA;QACA;QACAR;UACAQ,iBADA,CAEA;;UACA;QACA,CAJA;MAKA;IACA,CArBA;;IAsBAC;MACA;QACAC,oBADA;QAEAC,8BAFA;QAGAC,gCAHA;QAIAC;MAJA;IAMA,CA7BA;;IA8BAC;MACA;IACA,CAhCA;;IAiCAC;MACA;IACA,CAnCA;;IAoCAC;MACA;QACAC,yCADA;QAEAC;MAFA;MAIA;IACA;;EA1CA;AAjBA","names":["addDianzanComment","reduceDianzanComment","props","data","computed","isChild","isLiked","methods","handleDianzan","console","handleReply","id","userName","parentId","noteId","reloadGetData","isLogin","getDianZanDto","userId","commentId"],"sourceRoot":"src/views/notes/childrens","sources":["NoteCommentItem.vue"],"sourcesContent":["<template>\n  <div class=\"comment-item\">\n    <div class=\"avatar\">\n      <el-avatar :size=\"imgSize\" :src=\"itemData.avatarUrl\"> </el-avatar>\n    </div>\n    <div class=\"user-info\">\n      <div :class=\"isChild ? 'user-name child' : 'user-name'\">\n        <span>\n          {{ itemData.userId }}\n        </span>\n        <span class=\"grade\">LV {{ itemData.grade }}</span>\n      </div>\n\n      <div class=\"comment\" v-if=\"!isChild\">\n        Comments：\n        {{ itemData.commentContent }}\n      </div>\n      <div class=\"comment\" v-else>\n        Reply <span style=\"color: #79c9fc\">{{ itemData.replyUserName }}</span\n        >：\n        {{ itemData.commentContent }}\n      </div>\n\n      <div class=\"other-info\">\n        <span class=\"time\">{{ itemData.createdTime }}</span>\n        <span class=\"dianzan\" :class=\"isLiked\">\n          <i class=\"iconfont icon-dianzan dianzan\" @click=\"handleDianzan\"> </i>\n          {{ itemLike ? itemLike.likeNum : \"\" }}\n        </span>\n        <span class=\"reply\" @click=\"handleReply\">Reply</span>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport {\n  addDianzanComment,\n  reduceDianzanComment,\n} from \"@/network/note/index.js\";\nexport default {\n  props: [\"itemData\", \"itemLike\", \"imgSize\"],\n  data() {\n    return {};\n  },\n  computed: {\n    /**\n     * 该item是否是子评论\n     */\n    isChild() {\n      return this.itemData.level != 0;\n    },\n    isLiked() {\n      if (!this.itemLike) return \"\";\n      return this.itemLike.isLiked == 1 ? \"active\" : \"\";\n    },\n  },\n  methods: {\n    handleDianzan() {\n      if (!this.isLogin()) {\n        this.$message.warning(\"Please login before proceeding\");\n        return;\n      }\n      if (this.itemLike.isLiked === 0) {\n        // 当前用户还未给这篇笔记点过赞\n        addDianzanComment(this.getDianZanDto()).then((res) => {\n          console.log(res);\n          // 刷新数据\n          this.reloadGetData();\n        });\n      } else {\n        // 当前用户已经给这篇笔记点过赞\n        reduceDianzanComment(this.getDianZanDto()).then((res) => {\n          console.log(res);\n          // 刷新数据\n          this.reloadGetData();\n        });\n      }\n    },\n    handleReply() {\n      this.$emit(\"replyUser\", {\n        id: this.itemData.id,\n        userName: this.itemData.userId,\n        parentId: this.itemData.parentId,\n        noteId: this.itemData.noteId,\n      });\n    },\n    reloadGetData() {\n      this.$emit(\"reloadLikeData\");\n    },\n    isLogin() {\n      return this.$store.state.userInfo !== null;\n    },\n    getDianZanDto() {\n      const obj = {\n        userId: this.$store.state.userInfo.userid,\n        commentId: this.itemData.id,\n      };\n      return obj;\n    },\n  },\n};\n</script>\n\n<style lang=\"less\" scoped>\n.comment-item {\n  display: flex;\n  justify-content: left;\n  margin-bottom: 35px;\n  .avatar {\n    margin-right: 10px;\n  }\n  .user-info {\n    display: flex;\n    flex-direction: column;\n    width: 80%;\n\n    .user-name {\n      margin-bottom: 15px;\n      font-weight: bold;\n\n      .grade {\n        color: #fff;\n        font-size: 12px;\n        background: #616ee8;\n        border-radius: 2px;\n        padding: 1px;\n      }\n    }\n\n    .child {\n      margin-bottom: 8px;\n    }\n\n    .comment {\n      margin-bottom: 5px;\n      word-wrap: break-word;\n    }\n\n    .other-info {\n      color: #d1d0d2;\n      font-size: 12px;\n      .dianzan {\n        user-select: none;\n        i {\n          &:hover {\n            cursor: pointer;\n          }\n        }\n      }\n\n      .active {\n        color: #409eff;\n      }\n      .time {\n        margin-right: 10px;\n      }\n      .reply {\n        margin-left: 10px;\n\n        &:hover {\n          text-decoration: underline;\n          cursor: pointer;\n          user-select: none;\n        }\n      }\n    }\n  }\n}\n</style>\n"]}]}