{"remainingRequest":"E:\\Gua_new\\note-front\\node_modules\\babel-loader\\lib\\index.js!E:\\Gua_new\\note-front\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\Gua_new\\note-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Gua_new\\note-front\\src\\views\\notes\\childrens\\NoteContent.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\Gua_new\\note-front\\src\\views\\notes\\childrens\\NoteContent.vue","mtime":1672661850492},{"path":"E:\\Gua_new\\note-front\\babel.config.js","mtime":1663921093000},{"path":"E:\\Gua_new\\note-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Gua_new\\note-front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Gua_new\\note-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Gua_new\\note-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IE5vdGVDb21tZW50Q29udGFpbmVyIGZyb20gJy4vTm90ZUNvbW1lbnRDb250YWluZXIudnVlJzsKaW1wb3J0IE5vdGUgZnJvbSAnLi9Ob3RlLnZ1ZSc7CmltcG9ydCB7IGluc2VydERpYW56YW5PbmUsIGluc2VydENvbGxlY3RPbmUsIGRlbGV0ZURpYW56YW5PbmUsIGRlbGV0ZUNvbGxlY3RPbmUgfSBmcm9tICdAL25ldHdvcmsvbm90ZS9pbmRleC5qcyc7CmV4cG9ydCBkZWZhdWx0IHsKICBwcm9wczogewogICAgY29udGVudERhdGE6IHsKICAgICAgdHlwZTogT2JqZWN0LAogICAgICBkZWZhdWx0OiAoKSA9PiB7fQogICAgfQogIH0sCgogIGRhdGEoKSB7CiAgICByZXR1cm4gewogICAgICBsb2FkaW5nOiB0cnVlCiAgICB9OwogIH0sCgogIGNvbXBvbmVudHM6IHsKICAgIE5vdGVDb21tZW50Q29udGFpbmVyLAogICAgTm90ZQogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGNvbnRlbnRUZXh0KCkgewogICAgICByZXR1cm4gdGhpcy5jb250ZW50RGF0YSA/IHRoaXMuY29udGVudERhdGEuY29udGVudCA6ICcnOwogICAgfSwKCiAgICBpc0xpa2UoKSB7CiAgICAgIGlmICghdGhpcy5jb250ZW50RGF0YSkgcmV0dXJuOyAvLyDmsqHmnInmlbDmja4g55u05o6lcmV0dXJuCgogICAgICByZXR1cm4gdGhpcy5jb250ZW50RGF0YS5yZWxhdGlvbi5pc0xpa2UgPT09IDEgPyAnYWN0aXZlJyA6ICcnOwogICAgfSwKCiAgICBpc0NvbGxlY3QoKSB7CiAgICAgIHJldHVybiB0aGlzLmNvbnRlbnREYXRhLnJlbGF0aW9uLmlzQ29sbGVjdCA9PT0gMSA/ICdhY3RpdmUnIDogJyc7CiAgICB9CgogIH0sCiAgbWV0aG9kczogewogICAgaGFuZGxlRGlhblphbigpIHsKICAgICAgaWYgKCF0aGlzLmlzTG9naW4oKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygnUGxlYXNlIGxvZ2luIGJlZm9yZSBwcm9jZWVkaW5nJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5pc0xpa2UgPT09ICcnKSB7CiAgICAgICAgLy8g5b2T5YmN55So5oi36L+Y5pyq57uZ6L+Z56+H56yU6K6w54K56L+H6LWeCiAgICAgICAgaW5zZXJ0RGlhbnphbk9uZSh0aGlzLmdldERpYW5aYW5EdG8oKSkudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsgLy8g5Yi35paw5pWw5o2uCgogICAgICAgICAgdGhpcy5yZWxvYWRHZXREYXRhKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5b2T5YmN55So5oi35bey57uP57uZ6L+Z56+H56yU6K6w54K56L+H6LWeCiAgICAgICAgZGVsZXRlRGlhbnphbk9uZSh0aGlzLmdldERpYW5aYW5EdG8oKSkudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsgLy8g5Yi35paw5pWw5o2uCgogICAgICAgICAgdGhpcy5yZWxvYWRHZXREYXRhKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgaGFuZGxlQ29sbGVjdCgpIHsKICAgICAgaWYgKCF0aGlzLmlzTG9naW4oKSkgewogICAgICAgIHRoaXMuJG1lc3NhZ2Uud2FybmluZygnUGxlYXNlIGxvZ2luIGJlZm9yZSBwcm9jZWVkaW5nJyk7CiAgICAgICAgcmV0dXJuOwogICAgICB9CgogICAgICBpZiAodGhpcy5pc0NvbGxlY3QgPT09ICcnKSB7CiAgICAgICAgLy8g5b2T5YmN55So5oi36L+Y5pyq57uZ6L+Z56+H56yU6K6w54K56L+H6LWeCiAgICAgICAgaW5zZXJ0Q29sbGVjdE9uZSh0aGlzLmdldERpYW5aYW5EdG8oKSkudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsgLy8g5Yi35paw5pWw5o2uCgogICAgICAgICAgdGhpcy5yZWxvYWRHZXREYXRhKCk7CiAgICAgICAgfSk7CiAgICAgIH0gZWxzZSB7CiAgICAgICAgLy8g5b2T5YmN55So5oi35bey57uP57uZ6L+Z56+H56yU6K6w54K56L+H6LWeCiAgICAgICAgZGVsZXRlQ29sbGVjdE9uZSh0aGlzLmdldERpYW5aYW5EdG8oKSkudGhlbihyZXMgPT4gewogICAgICAgICAgY29uc29sZS5sb2cocmVzKTsgLy8g5Yi35paw5pWw5o2uCgogICAgICAgICAgdGhpcy5yZWxvYWRHZXREYXRhKCk7CiAgICAgICAgfSk7CiAgICAgIH0KICAgIH0sCgogICAgaXNMb2dpbigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLnVzZXJJbmZvICE9PSBudWxsOwogICAgfSwKCiAgICAvLyDniLbnu4Tku7bph43mlrDmi7/mlbDmja4KICAgIHJlbG9hZEdldERhdGEoKSB7CiAgICAgIHRoaXMuJGVtaXQoJ3JlbG9hZEdldERhdGEnKTsKICAgIH0sCgogICAgZ2V0RGlhblphbkR0bygpIHsKICAgICAgY29uc3Qgb2JqID0gewogICAgICAgIHVzZXJJZDogdGhpcy4kc3RvcmUuc3RhdGUudXNlckluZm8udXNlcmlkLAogICAgICAgIG5vdGVJZDogdGhpcy4kcm91dGUucXVlcnkuaWQKICAgICAgfTsKICAgICAgcmV0dXJuIG9iajsKICAgIH0KCiAgfSwKICB3YXRjaDogewogICAgY29udGVudERhdGEoKSB7CiAgICAgIC8vIOmYsuatoumhtemdoumXquWKqAogICAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgfSwgMzAwKTsKICAgIH0KCiAgfQp9Ow=="},{"version":3,"mappings":"AA2FA;AACA;AACA,SACAA,gBADA,EAEAC,gBAFA,EAGAC,gBAHA,EAIAC,gBAJA,QAKA,yBALA;AAOA;EACAC;IACAC;MACAC,YADA;MAEAC;IAFA;EADA,CADA;;EAOAC;IACA;MACAC;IADA;EAGA,CAXA;;EAYAC;IAAAC;IAAAC;EAAA,CAZA;EAaAC;IACAC;MACA;IACA,CAHA;;IAIAC;MACA,8BADA,CACA;;MACA;IACA,CAPA;;IAQAC;MACA;IACA;;EAVA,CAbA;EAyBAC;IACAC;MACA;QACA;QACA;MACA;;MACA;QACA;QACAlB;UACAmB,iBADA,CAEA;;UACA;QACA,CAJA;MAKA,CAPA,MAOA;QACA;QACAjB;UACAiB,iBADA,CAEA;;UACA;QACA,CAJA;MAKA;IACA,CArBA;;IAsBAC;MACA;QACA;QACA;MACA;;MACA;QACA;QACAnB;UACAkB,iBADA,CAEA;;UACA;QACA,CAJA;MAKA,CAPA,MAOA;QACA;QACAhB;UACAgB,iBADA,CAEA;;UACA;QACA,CAJA;MAKA;IACA,CA1CA;;IA2CAE;MACA;IACA,CA7CA;;IA8CA;IACAC;MACA;IACA,CAjDA;;IAkDAC;MACA;QACAC,yCADA;QAEAC;MAFA;MAIA;IACA;;EAxDA,CAzBA;EAmFAC;IACArB;MACA;MACAsB;QACA;MACA,CAFA,EAEA,GAFA;IAGA;;EANA;AAnFA","names":["insertDianzanOne","insertCollectOne","deleteDianzanOne","deleteCollectOne","props","contentData","type","default","data","loading","components","NoteCommentContainer","Note","computed","contentText","isLike","isCollect","methods","handleDianZan","console","handleCollect","isLogin","reloadGetData","getDianZanDto","userId","noteId","watch","setTimeout"],"sourceRoot":"src/views/notes/childrens","sources":["NoteContent.vue"],"sourcesContent":["<template>\n  <div class=\"note-content\" ref=\"contentRef\">\n    <!-- <el-scrollbar class=\"scrollbar\"> -->\n    <div class=\"scrollbar-wrap\">\n      <el-skeleton :loading=\"loading\" animated>\n        <template v-if=\"contentData\">\n          <div class=\"header\">{{ contentData.title }}</div>\n          <div class=\"note-detail\">\n            <span>{{ contentData.tag }}</span>\n            <span>{{ contentData.createdTime }}</span>\n            <span :class=\"isLike\">\n              {{ contentData.likeNum }}\n              <i\n                class=\"iconfont icon-dianzan dianzan\"\n                @click=\"handleDianZan\"\n              ></i>\n            </span>\n            <span :class=\"isCollect\">\n              {{ contentData.collectNum }}\n              <i\n                class=\"iconfont icon-jiaxingshoucang jiaxingshoucang\"\n                @click=\"handleCollect\"\n              ></i>\n            </span>\n          </div>\n          <div class=\"author\">\n            <el-avatar :size=\"28\" :src=\"contentData.user.avatarUrl\">\n            </el-avatar>\n            <span>{{ contentData.user.userid }}</span>\n            <div class=\"grade\">LV 1</div>\n          </div>\n        </template>\n        <template slot=\"template\">\n          <div style=\"text-align: center\">\n            <el-skeleton-item\n              class=\"note-content-skeleton-title\"\n              variant=\"h1\"\n            />\n            <div class=\"note-content-skeleton-note-detail\">\n              <el-skeleton-item\n                variant=\"text\"\n                style=\"margin-right: 20px; width: 50px\"\n              />\n              <el-skeleton-item\n                variant=\"text\"\n                style=\"margin-right: 20px; width: 150px\"\n              />\n              <el-skeleton-item\n                variant=\"text\"\n                style=\"margin-right: 20px; width: 30px\"\n              />\n              <el-skeleton-item\n                variant=\"text\"\n                style=\"margin-right: 20px; width: 30px\"\n              />\n            </div>\n            <div class=\"note-content-skeleton-author\">\n              <el-skeleton-item\n                variant=\"image\"\n                style=\"margin-right: 10px; width: 32px; height: 32px\"\n              />\n              <el-skeleton-item\n                variant=\"text\"\n                style=\"margin-right: 5px; width: 60px\"\n              />\n              <el-skeleton-item variant=\"text\" style=\"width: 40px\" />\n            </div>\n          </div>\n        </template>\n      </el-skeleton>\n\n      <div class=\"notes\"><Note :contentText=\"contentText\" /></div>\n\n      <div class=\"like\">\n        <i\n          class=\"iconfont icon-dianzan dianzan\"\n          :class=\"isLike\"\n          @click=\"handleDianZan\"\n        ></i>\n        <span v-if=\"!isLike\">Click Here if You Like It</span>\n        <span v-else>Liked</span>\n      </div>\n      <div class=\"comment\">\n        <NoteCommentContainer />\n      </div>\n    </div>\n    <!-- </el-scrollbar> -->\n  </div>\n</template>\n\n<script>\nimport NoteCommentContainer from './NoteCommentContainer.vue';\nimport Note from './Note.vue';\nimport {\n  insertDianzanOne,\n  insertCollectOne,\n  deleteDianzanOne,\n  deleteCollectOne,\n} from '@/network/note/index.js';\n\nexport default {\n  props: {\n    contentData: {\n      type: Object,\n      default: () => {},\n    },\n  },\n  data() {\n    return {\n      loading: true,\n    };\n  },\n  components: { NoteCommentContainer, Note },\n  computed: {\n    contentText() {\n      return this.contentData ? this.contentData.content : '';\n    },\n    isLike() {\n      if (!this.contentData) return; // 没有数据 直接return\n      return this.contentData.relation.isLike === 1 ? 'active' : '';\n    },\n    isCollect() {\n      return this.contentData.relation.isCollect === 1 ? 'active' : '';\n    },\n  },\n  methods: {\n    handleDianZan() {\n      if (!this.isLogin()) {\n        this.$message.warning('Please login before proceeding');\n        return;\n      }\n      if (this.isLike === '') {\n        // 当前用户还未给这篇笔记点过赞\n        insertDianzanOne(this.getDianZanDto()).then((res) => {\n          console.log(res);\n          // 刷新数据\n          this.reloadGetData();\n        });\n      } else {\n        // 当前用户已经给这篇笔记点过赞\n        deleteDianzanOne(this.getDianZanDto()).then((res) => {\n          console.log(res);\n          // 刷新数据\n          this.reloadGetData();\n        });\n      }\n    },\n    handleCollect() {\n      if (!this.isLogin()) {\n        this.$message.warning('Please login before proceeding');\n        return;\n      }\n      if (this.isCollect === '') {\n        // 当前用户还未给这篇笔记点过赞\n        insertCollectOne(this.getDianZanDto()).then((res) => {\n          console.log(res);\n          // 刷新数据\n          this.reloadGetData();\n        });\n      } else {\n        // 当前用户已经给这篇笔记点过赞\n        deleteCollectOne(this.getDianZanDto()).then((res) => {\n          console.log(res);\n          // 刷新数据\n          this.reloadGetData();\n        });\n      }\n    },\n    isLogin() {\n      return this.$store.state.userInfo !== null;\n    },\n    // 父组件重新拿数据\n    reloadGetData() {\n      this.$emit('reloadGetData');\n    },\n    getDianZanDto() {\n      const obj = {\n        userId: this.$store.state.userInfo.userid,\n        noteId: this.$route.query.id,\n      };\n      return obj;\n    },\n  },\n  watch: {\n    contentData() {\n      // 防止页面闪动\n      setTimeout(() => {\n        this.loading = false;\n      }, 300);\n    },\n  },\n};\n</script>\n\n<style lang=\"less\">\n.note-content {\n  flex: 1;\n  background: #fff;\n  border-radius: 5px;\n  border: 1px solid #dcdcdc;\n  border-bottom: none;\n  // 解决flex：1被撑开导致滚动条显示异常\n  // overflow-y: hidden;\n\n  // .scrollbar {\n  // height: 100%;\n\n  // 隐藏横向滚动条\n  // & > .el-scrollbar__wrap {\n  //   overflow-x: hidden;\n  // }\n\n  .scrollbar-wrap {\n    padding: 20px 90px;\n\n    .note-content-skeleton-title {\n      width: 40%;\n      margin: auto;\n      margin-bottom: 10px;\n    }\n    .note-content-skeleton-note-detail {\n      display: flex;\n      justify-content: flex-start;\n    }\n    .note-content-skeleton-author {\n      display: flex;\n      justify-content: flex-start;\n      align-items: center;\n      margin-top: 10px;\n    }\n\n    .header {\n      font-size: 20px;\n      text-align: center;\n      margin-bottom: 10px;\n    }\n\n    .note-detail {\n      color: #b7b7b7;\n      font-size: 14px;\n      display: flex;\n      align-items: center;\n      // padding-left: 20px;\n\n      .active {\n        color: #409eff;\n      }\n\n      & > span {\n        margin-right: 20px;\n\n        .dianzan {\n          font-size: 14px;\n          user-select: none;\n          &:hover {\n            cursor: pointer;\n          }\n        }\n\n        .jiaxingshoucang {\n          font-size: 14px;\n          font-weight: bold;\n          user-select: none;\n          &:hover {\n            cursor: pointer;\n          }\n        }\n      }\n    }\n\n    .author {\n      display: flex;\n      align-items: center;\n      margin: 10px 0px;\n\n      & > span {\n        font-size: 13px;\n        margin: 0px 5px;\n      }\n\n      .grade {\n        background: #ea3869;\n        color: #fff;\n        font-size: 12px;\n        border-radius: 2px;\n        padding: 2px 1px;\n      }\n    }\n\n    .like {\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      padding: 8px 0px;\n\n      color: #bbbbbb;\n      .active {\n        color: #409eff;\n      }\n      .dianzan {\n        font-size: 20px;\n        margin-right: 20px;\n        user-select: none;\n        &:hover {\n          cursor: pointer;\n        }\n      }\n      font-size: 13px;\n    }\n    .comment {\n      background: #fafbfd;\n    }\n  }\n  // }\n}\n</style>\n"]}]}