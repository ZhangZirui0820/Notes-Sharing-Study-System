{"remainingRequest":"E:\\Notes_Sharing Study System\\note-front\\node_modules\\babel-loader\\lib\\index.js!E:\\Notes_Sharing Study System\\note-front\\node_modules\\eslint-loader\\index.js??ref--14-0!E:\\Notes_Sharing Study System\\note-front\\src\\network\\index.js","dependencies":[{"path":"E:\\Notes_Sharing Study System\\note-front\\src\\network\\index.js","mtime":1672661262173},{"path":"E:\\Notes_Sharing Study System\\note-front\\babel.config.js","mtime":1663921093000},{"path":"E:\\Notes_Sharing Study System\\note-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Notes_Sharing Study System\\note-front\\node_modules\\babel-loader\\lib\\index.js","mtime":315532800000},{"path":"E:\\Notes_Sharing Study System\\note-front\\node_modules\\eslint-loader\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9NZXNzYWdlMiBmcm9tICJlbGVtZW50LXVpL2xpYi90aGVtZS1jaGFsay9tZXNzYWdlLmNzcyI7CmltcG9ydCAiZWxlbWVudC11aS9saWIvdGhlbWUtY2hhbGsvYmFzZS5jc3MiOwppbXBvcnQgX01lc3NhZ2UgZnJvbSAiZWxlbWVudC11aS9saWIvbWVzc2FnZSI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgYXhpb3MgZnJvbSAiYXhpb3MiOwppbXBvcnQgY29kZU1hcCBmcm9tICIuL1Jlc3VsdENvZGUiOwppbXBvcnQgcm91dGVyIGZyb20gIkAvcm91dGVyIjsKaW1wb3J0IHsgbG9nb3V0IH0gZnJvbSAiQC91dGlscy91c2VyVXRpbC5qcyI7CmltcG9ydCB7IGlzSlNPTiB9IGZyb20gIkAvdXRpbHMvanNvblV0aWwuanMiOwppbXBvcnQgeyByZWZyZXNoVG9rZW5BcGkgfSBmcm9tICIuL2xvZ2luL2luZGV4IjsKaW1wb3J0IE5Qcm9ncmVzcyBmcm9tICJucHJvZ3Jlc3MiOwppbXBvcnQgIm5wcm9ncmVzcy9ucHJvZ3Jlc3MuY3NzIjsKTlByb2dyZXNzLmNvbmZpZ3VyZSh7CiAgc2hvd1NwaW5uZXI6IGZhbHNlCn0pOyAvLyDlhbPpl63ov5vluqbmnaHlnIbnjq8KCmNvbnN0IGluc3RhbmNlID0gYXhpb3MuY3JlYXRlKHsKICBiYXNlVVJMOiBwcm9jZXNzLmVudi5WVUVfQVBQX1NFUlZFUl9VUkwsCiAgdGltZW91dDogMTAwMDAKfSk7Ci8qKgogKiDmoLnmja5sb2NhbFN0b3JhZ2XkuK3nmoR0b2tlbueUn+aIkOWvueW6lOWQjuerr+WTjeW6lOeahOivt+axguWktAogKiBAcGFyYW0geyp9IGNvbmZpZwogKi8KCmZ1bmN0aW9uIGdlbmVyYXRlQXV0aG9yaXphdGlvbkhlYWRlcihjb25maWcpIHsKICBjb25zdCB0b2tlbiA9IGxvY2FsU3RvcmFnZS5nZXRJdGVtKCJ0b2tlbiIpOwoKICBpZiAodG9rZW4pIHsKICAgIGNvbmZpZy5oZWFkZXJzLkF1dGhvcml6YXRpb24gPSBgQmVhcmVyICR7SlNPTi5wYXJzZSh0b2tlbil9YDsKICB9CgogIHJldHVybiBjb25maWc7Cn0KCmxldCBpc1JlZnJlc2hpbmcgPSB0cnVlOwpsZXQgc3Vic2NyaWJlcnMgPSBbXTsKCmZ1bmN0aW9uIGhhbmRsZUV4cGlyZWRUb2tlbihyZXMpIHsKICAvLyDliLfmlrB0b2tlbueahOWHveaVsCzov5npnIDopoHmt7vliqDkuIDkuKrlvIDlhbPvvIzpmLLmraLph43lpI3or7fmsYIKICBpZiAoaXNSZWZyZXNoaW5nKSB7CiAgICByZWZyZXNoVG9rZW5SZXF1c3QoKTsKICB9CgogIGlzUmVmcmVzaGluZyA9IGZhbHNlOyAvLyDlm6DkuLror7fmsYLkvZPkuK3mnInmlbDmja7vvIznhLblkI50b2tlbuWkseaViOS5i+WQju+8jOaUtumbhui/meS4quWksei0peeahOivt+axgu+8jOi/meS4quaXtuWAmeivt+axguS9k+eahOaVsOaNruWwseS8muWPmOaIkGpzb27moLzlvI/vvIzkvJrlvbHlk43liLDmjqXlj6MKCiAgaWYgKGlzSlNPTihyZXMuY29uZmlnLmRhdGEpKSB7CiAgICByZXMuY29uZmlnLmRhdGEgPSBKU09OLnBhcnNlKHJlcy5jb25maWcuZGF0YSk7CiAgfSAvLyDov5nkuKpQcm9taXNl5Ye95pWw5b6I5YWz6ZSuCgoKICBjb25zdCByZXRyeU9yaWdpbmFsUmVxdWVzdCA9IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gewogICAgYWRkU3Vic2NyaWJlcigoKSA9PiB7CiAgICAgIHJlc29sdmUoaW5zdGFuY2UocmVzLmNvbmZpZykpOwogICAgfSk7CiAgfSk7CiAgcmV0dXJuIHJldHJ5T3JpZ2luYWxSZXF1ZXN0Owp9IC8vIOmBjeWOhuaJp+ihjOmcgOimgeaJp+ihjOeahOWHveaVsAoKCmZ1bmN0aW9uIG9uQWNjZXNzVG9rZW5GZXRjaGVkKCkgewogIHN1YnNjcmliZXJzLmZvckVhY2goY2FsbGJhY2sgPT4gewogICAgY2FsbGJhY2soKTsKICB9KTsKICBzdWJzY3JpYmVycyA9IFtdOwp9IC8vIOaUtumbhumcgOimgeaJp+ihjOeahOWHveaVsAoKCmZ1bmN0aW9uIGFkZFN1YnNjcmliZXIoY2FsbGJhY2spIHsKICBzdWJzY3JpYmVycy5wdXNoKGNhbGxiYWNrKTsKfQoKZnVuY3Rpb24gcmVmcmVzaFRva2VuUmVxdXN0KCkgewogIGNvbnN0IHJlZnJlc2hUb2tlbiA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInJlZnJlc2hUb2tlbiIpKTsKICBjb25zdCB1c2VySW5mbyA9IEpTT04ucGFyc2UobG9jYWxTdG9yYWdlLmdldEl0ZW0oInVzZXJJbmZvIikpOwogIHJlZnJlc2hUb2tlbkFwaSh7CiAgICBsb2dpbkluZm86IHsKICAgICAgdXNlcklkOiB1c2VySW5mby51c2VyaWQKICAgIH0sCiAgICByZWZyZXNoVG9rZW46IHJlZnJlc2hUb2tlbgogIH0pLnRoZW4ocmVzID0+IHsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJyZWZyZXNoVG9rZW4iLCBKU09OLnN0cmluZ2lmeShyZXMuZGF0YS5yZWZyZXNoVG9rZW4pKTsKICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCJ0b2tlbiIsIEpTT04uc3RyaW5naWZ5KHJlcy5kYXRhLnRva2VuKSk7CiAgICBvbkFjY2Vzc1Rva2VuRmV0Y2hlZCgpOwogICAgaXNSZWZyZXNoaW5nID0gdHJ1ZTsKICB9KTsKfSAvLyByZXF1ZXN0IGludGVyY2VwCgoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlcXVlc3QudXNlKGNvbmZpZyA9PiB7CiAgLy8g5byA5ZCv6L+b5bqm5p2hCiAgTlByb2dyZXNzLnN0YXJ0KCk7IC8vIOa3u+WKoOivt+axguWktO+8jOmHjOmdouaUvuWFpeS4juacjeWKoeWZqOe6puWumuWlveeahOagvOW8jwoKICByZXR1cm4gZ2VuZXJhdGVBdXRob3JpemF0aW9uSGVhZGVyKGNvbmZpZyk7Cn0sIGVyciA9PiB7CiAgX01lc3NhZ2UuZXJyb3IoZXJyKTsKCiAgcmV0dXJuIFByb21pc2UucmVqZWN0KGVycik7Cn0pOwoKZnVuY3Rpb24gcmVzcG9uc2VTdWNjZXNzSGFuZGxlcihyZXMpIHsKICAvLyDlhbPpl63ov5vluqbmnaEKICBOUHJvZ3Jlc3MuZG9uZSgpOwogIGNvbnN0IGNvZGUgPSByZXMuZGF0YS5jb2RlOwogIGNvbnN0IG1lc3NhZ2UgPSByZXMuZGF0YS5tZXNzYWdlOyAvLyDplJnor6/kv6Hmga/pg73ku47mjqXlj6Pojrflj5YKCiAgaWYgKGNvZGUgIT0gMjAwKSB7CiAgICAvLyDphY3nva7liY3nq6/phY3nva7nmoRlcnLmmKDlsITooagKICAgIGlmIChjb2RlTWFwLmhhcyhjb2RlKSkgewogICAgICAvLyBbZXJyTWVzc2FnZSwgdG8/XQogICAgICBjb25zdCBbZXJyTWVzc2FnZSwgdG9dID0gY29kZU1hcC5nZXQoY29kZSk7CgogICAgICBfTWVzc2FnZS5lcnJvcihlcnJNZXNzYWdlKTsgLy8g5aaC5p6c6ZyA6KaB6Lez6L2sCgoKICAgICAgaWYgKHRvICE9ICIiKSB7CiAgICAgICAgaWYgKHRvID09ICIvbG9naW4iKSB7CiAgICAgICAgICAvKioKICAgICAgICAgICAqIOi3s+i9rOWJjSDlhYjmiopsb2NhbFN0b3JhZ2XkuK3lhbPkuo7nlKjmiLfnmoTkv6Hmga/lhYjliKDpmaQKICAgICAgICAgICAqIOWboOS4uuWcqHJvdXRlci5iZWZvcmVFYWNo5oum5oiq5LqG5YWz5LqO55So5oi35pyJbG9jYWxTdG9yYWdl55qE5L+h5oGv5peg5rOV6Lez6L2s55m75b2V5ZKM5rOo5YaM6aG16Z2iCiAgICAgICAgICAgKi8KICAgICAgICAgIGxvZ291dCgpOwogICAgICAgIH0KCiAgICAgICAgcm91dGVyLnB1c2godG8pOwogICAgICB9CgogICAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyTWVzc2FnZSk7CiAgICB9IC8vIHRva2Vu6L+H5pyf5aSE55CGCgoKICAgIGlmIChjb2RlID09PSA3MDAwNCkgewogICAgICByZXR1cm4gaGFuZGxlRXhwaXJlZFRva2VuKHJlcyk7CiAgICB9CgogICAgX01lc3NhZ2UuZXJyb3IobWVzc2FnZSk7IC8vIOi/lOWbnnJlamVjdCDkuI3ov5vlhaXliLDkuJrliqHkuK3nmoR0aGVu5Ye95pWw5Zue6LCD5LitCgoKICAgIHJldHVybiBQcm9taXNlLnJlamVjdChtZXNzYWdlKTsKICB9IGVsc2UgewogICAgcmV0dXJuIHJlcy5kYXRhOwogIH0KfQoKaW5zdGFuY2UuaW50ZXJjZXB0b3JzLnJlc3BvbnNlLnVzZShyZXNwb25zZVN1Y2Nlc3NIYW5kbGVyLCBlcnIgPT4gewogIC8vIOWFs+mXrei/m+W6puadoQogIE5Qcm9ncmVzcy5kb25lKCk7IC8vIOWPquaciXJlZnJlaFRva2Vu6L+H5pyf5omN5Lya5p2l5Yiw6L+Z77yMdG9rZW7ov4fmnJ/lj6rkvJrov5Tlm57lr7nlupTnmoTlk43lupTnoIHvvIxyZWZyZXNoVG9rZW7ov4fmnJ/liJnmmK/mnI3liqHlmajlk43lupQKCiAgaWYgKGVyci5yZXNwb25zZS5zdGF0dXMgPT09IDQwMSkgewogICAgX01lc3NhZ2Uud2FybmluZygiTG9naW4gc3RhdHVzIGhhcyBleHBpcmVkLCBwbGVhc2UgbG9nIGluIGFnYWluIik7CiAgICAvKioKICAgICAqIOi3s+i9rOWJjSDlhYjmiopsb2NhbFN0b3JhZ2XkuK3lhbPkuo7nlKjmiLfnmoTkv6Hmga/lhYjliKDpmaQKICAgICAqIOWboOS4uuWcqHJvdXRlci5iZWZvcmVFYWNo5oum5oiq5LqG5YWz5LqO55So5oi35pyJbG9jYWxTdG9yYWdl55qE5L+h5oGv5peg5rOV6Lez6L2s55m75b2V5ZKM5rOo5YaM6aG16Z2iCiAgICAgKi8KCgogICAgbG9nb3V0KCk7CiAgICByb3V0ZXIucHVzaCgiL2xvZ2luIik7CiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoZXJyKTsKICB9CgogIGxldCBlcnJNZXNzYWdlID0gZXJyLnJlc3BvbnNlLmRhdGEubWVzc2FnZTsKCiAgaWYgKGVyci5yZXNwb25zZS5kYXRhLm1lc3NhZ2UgPT0gdW5kZWZpbmVkKSB7CiAgICBlcnJNZXNzYWdlID0gIlBsZWFzZSBjaGVjayBpZiB0aGUgbmV0d29yayBpcyBjb25uZWN0ZWQiOwogIH0KCiAgX01lc3NhZ2UuZXJyb3IoZXJyTWVzc2FnZSk7CgogIHJldHVybiBQcm9taXNlLnJlamVjdChlcnIpOwp9KTsKZXhwb3J0IGRlZmF1bHQgaW5zdGFuY2U7"},{"version":3,"names":["axios","codeMap","router","logout","isJSON","refreshTokenApi","NProgress","configure","showSpinner","instance","create","baseURL","process","env","VUE_APP_SERVER_URL","timeout","generateAuthorizationHeader","config","token","localStorage","getItem","headers","Authorization","JSON","parse","isRefreshing","subscribers","handleExpiredToken","res","refreshTokenRequst","data","retryOriginalRequest","Promise","resolve","addSubscriber","onAccessTokenFetched","forEach","callback","push","refreshToken","userInfo","loginInfo","userId","userid","then","setItem","stringify","interceptors","request","use","start","err","error","reject","responseSuccessHandler","done","code","message","has","errMessage","to","get","response","status","warning","undefined"],"sources":["E:/Notes_Sharing Study System/note-front/src/network/index.js"],"sourcesContent":["import axios from \"axios\";\nimport { Message } from \"element-ui\";\nimport codeMap from \"./ResultCode\";\nimport router from \"@/router\";\nimport { logout } from \"@/utils/userUtil.js\";\nimport { isJSON } from \"@/utils/jsonUtil.js\";\nimport { refreshTokenApi } from \"./login/index\";\nimport NProgress from \"nprogress\";\nimport \"nprogress/nprogress.css\";\n\nNProgress.configure({ showSpinner: false }); // 关闭进度条圆环\n\nconst instance = axios.create({\n  baseURL: process.env.VUE_APP_SERVER_URL,\n  timeout: 10000,\n});\n\n/**\n * 根据localStorage中的token生成对应后端响应的请求头\n * @param {*} config\n */\nfunction generateAuthorizationHeader(config) {\n  const token = localStorage.getItem(\"token\");\n  if (token) {\n    config.headers.Authorization = `Bearer ${JSON.parse(token)}`;\n  }\n\n  return config;\n}\n\nlet isRefreshing = true;\nlet subscribers = [];\n\nfunction handleExpiredToken(res) {\n  // 刷新token的函数,这需要添加一个开关，防止重复请求\n  if (isRefreshing) {\n    refreshTokenRequst();\n  }\n  isRefreshing = false;\n\n  // 因为请求体中有数据，然后token失效之后，收集这个失败的请求，这个时候请求体的数据就会变成json格式，会影响到接口\n  if (isJSON(res.config.data)) {\n    res.config.data = JSON.parse(res.config.data);\n  }\n  // 这个Promise函数很关键\n  const retryOriginalRequest = new Promise((resolve) => {\n    addSubscriber(() => {\n      resolve(instance(res.config));\n    });\n  });\n  return retryOriginalRequest;\n}\n\n// 遍历执行需要执行的函数\nfunction onAccessTokenFetched() {\n  subscribers.forEach((callback) => {\n    callback();\n  });\n  subscribers = [];\n}\n\n// 收集需要执行的函数\nfunction addSubscriber(callback) {\n  subscribers.push(callback);\n}\n\nfunction refreshTokenRequst() {\n  const refreshToken = JSON.parse(localStorage.getItem(\"refreshToken\"));\n  const userInfo = JSON.parse(localStorage.getItem(\"userInfo\"));\n  refreshTokenApi({\n    loginInfo: {\n      userId: userInfo.userid,\n    },\n    refreshToken: refreshToken,\n  }).then((res) => {\n    localStorage.setItem(\"refreshToken\", JSON.stringify(res.data.refreshToken));\n    localStorage.setItem(\"token\", JSON.stringify(res.data.token));\n    onAccessTokenFetched();\n    isRefreshing = true;\n  });\n}\n\n// request intercep\ninstance.interceptors.request.use(\n  (config) => {\n    // 开启进度条\n    NProgress.start();\n    // 添加请求头，里面放入与服务器约定好的格式\n    return generateAuthorizationHeader(config);\n  },\n  (err) => {\n    Message.error(err);\n\n    return Promise.reject(err);\n  }\n);\n\nfunction responseSuccessHandler(res) {\n  // 关闭进度条\n  NProgress.done();\n\n  const code = res.data.code;\n  const message = res.data.message;\n\n  // 错误信息都从接口获取\n  if (code != 200) {\n    // 配置前端配置的err映射表\n    if (codeMap.has(code)) {\n      // [errMessage, to?]\n      const [errMessage, to] = codeMap.get(code);\n      Message.error(errMessage);\n\n      // 如果需要跳转\n      if (to != \"\") {\n        if (to == \"/login\") {\n          /**\n           * 跳转前 先把localStorage中关于用户的信息先删除\n           * 因为在router.beforeEach拦截了关于用户有localStorage的信息无法跳转登录和注册页面\n           */\n          logout();\n        }\n        router.push(to);\n      }\n      return Promise.reject(errMessage);\n    }\n\n    // token过期处理\n    if (code === 70004) {\n      return handleExpiredToken(res);\n    }\n\n    Message.error(message);\n    // 返回reject 不进入到业务中的then函数回调中\n    return Promise.reject(message);\n  } else {\n    return res.data;\n  }\n}\n\ninstance.interceptors.response.use(responseSuccessHandler, (err) => {\n  // 关闭进度条\n  NProgress.done();\n  // 只有refrehToken过期才会来到这，token过期只会返回对应的响应码，refreshToken过期则是服务器响应\n  if (err.response.status === 401) {\n    Message.warning(\"Login status has expired, please log in again\");\n    /**\n     * 跳转前 先把localStorage中关于用户的信息先删除\n     * 因为在router.beforeEach拦截了关于用户有localStorage的信息无法跳转登录和注册页面\n     */\n    logout();\n    router.push(\"/login\");\n\n    return Promise.reject(err);\n  }\n  let errMessage = err.response.data.message;\n  if (err.response.data.message == undefined) {\n    errMessage = \"Please check if the network is connected\";\n  }\n  Message.error(errMessage);\n  return Promise.reject(err);\n});\n\nexport default instance;\n"],"mappings":"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"}]}