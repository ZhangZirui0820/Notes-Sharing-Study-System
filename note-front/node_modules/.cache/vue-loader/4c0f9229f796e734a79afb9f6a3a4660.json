{"remainingRequest":"E:\\Gua_new\\note-front\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\Gua_new\\note-front\\src\\views\\submitNote\\childrens\\SubmitNoteContent.vue?vue&type=style&index=0&id=28a71889&lang=less&scoped=true&","dependencies":[{"path":"E:\\Gua_new\\note-front\\src\\views\\submitNote\\childrens\\SubmitNoteContent.vue","mtime":1672662126355},{"path":"E:\\Gua_new\\note-front\\node_modules\\css-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Gua_new\\note-front\\node_modules\\vue-loader\\lib\\loaders\\stylePostLoader.js","mtime":1655715156000},{"path":"E:\\Gua_new\\note-front\\node_modules\\postcss-loader\\src\\index.js","mtime":499162500000},{"path":"E:\\Gua_new\\note-front\\node_modules\\less-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Gua_new\\note-front\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\Gua_new\\note-front\\node_modules\\vue-loader\\lib\\index.js","mtime":1655715099000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ci5zdWJtaXQtbm90ZS1jb250ZW50IHsKICBmbGV4OiAxOwogIGJhY2tncm91bmQ6ICNmZmY7CiAgYm9yZGVyLXJhZGl1czogNXB4OwogIGJvcmRlcjogMXB4IHNvbGlkICNkY2RjZGM7CiAgYm9yZGVyLWJvdHRvbTogbm9uZTsKICBwYWRkaW5nOiAxMHB4OwoKICAucmVxdWlyZSB7CiAgICAmOjpiZWZvcmUgewogICAgICBjb250ZW50OiAnKic7CiAgICAgIGNvbG9yOiAjZjU2YzZjOwogICAgICBtYXJnaW4tcmlnaHQ6IDRweDsKICAgIH0KICB9CgogIC50aXRsZSB7CiAgICAmID4gc3BhbiB7CiAgICAgIG1hcmdpbi1yaWdodDogMjBweDsKICAgIH0KICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgfQoKICAudGFnIHsKICAgICYgPiBzcGFuIHsKICAgICAgbWFyZ2luLXJpZ2h0OiAyNHB4OwogICAgfQogICAgbWFyZ2luLWJvdHRvbTogMTVweDsKICB9CgogIC5jb250ZW50IHsKICAgIC5jb250ZW50LXRpdGxlIHsKICAgICAgbWFyZ2luLWJvdHRvbTogMTBweDsKICAgIH0KICAgIG1hcmdpbi1ib3R0b206IDE1cHg7CiAgfQogIC51cGxvYWQgewogICAgJiA+IHNwYW4gewogICAgICBtYXJnaW4tcmlnaHQ6IDI0cHg7CiAgICAgIG1hcmdpbi10b3A6IDVweDsKICAgIH0KICAgIGRpc3BsYXk6IGZsZXg7CiAgICBhbGlnbi1pdGVtczogZmxleC1zdGFydDsKICAgIG1hcmdpbi10b3A6IDVweDsKICAgIGhlaWdodDogODBweDsKICAgIG1hcmdpbi1ib3R0b206IDVweDsKICB9CgogIC5zdWJtaXQgewogICAgZGlzcGxheTogZmxleDsKICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOwogICAgYWxpZ24taXRlbXM6IGNlbnRlcjsKICB9Cn0K"},{"version":3,"sources":["SubmitNoteContent.vue"],"names":[],"mappings":";AAqKA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA","file":"SubmitNoteContent.vue","sourceRoot":"src/views/submitNote/childrens","sourcesContent":["<template>\n  <div class=\"submit-note-content\">\n    <div class=\"title\">\n      <span class=\"require\">Note Title </span>\n      <el-input\n        style=\"width: 350px\"\n        type=\"text\"\n        placeholder=\"please input note title\"\n        v-model=\"title\"\n        maxlength=\"20\"\n        show-word-limit\n      >\n      </el-input>\n    </div>\n\n    <div class=\"tag\">\n      <span class=\"require\">Note Tag </span>\n\n      <el-select\n        v-model=\"tagValues\"\n        multiple\n        placeholder=\"please select tag\"\n        style=\"width: 350px\"\n      >\n        <el-option v-for=\"item in tagOptions\" :key=\"item\" :value=\"item\">\n        </el-option>\n      </el-select>\n    </div>\n    <div class=\"content\">\n      <div class=\"content-title require\">Note Content</div>\n      <Editor v-model=\"noteContent\" ref=\"editor\" />\n    </div>\n\n    <div class=\"upload\">\n      <span class=\"require\">Note Image</span>\n      <el-upload\n        ref=\"upload\"\n        :action=\"uploadUrl\"\n        :file-list=\"fileList\"\n        :auto-upload=\"false\"\n        :before-upload=\"checkFile\"\n        accept=\".jpg,.png,.jpeg\"\n        :http-request=\"submitNoteData\"\n        :limit=\"1\"\n      >\n        <el-button size=\"small\" type=\"primary\">post note image</el-button>\n        <div slot=\"tip\" class=\"el-upload__tip\">\n          Only a single image in jpg/png/jpeg format can be uploaded and the\n          maximum size is 10MB\n        </div>\n      </el-upload>\n    </div>\n\n    <div class=\"submit\">\n      <el-button type=\"primary\" @click=\"handleSubmitNote\"\n        >submit note</el-button\n      >\n    </div>\n  </div>\n</template>\n\n<script>\nimport Editor from './Editor.vue'\nimport { saveNoteData } from '@/network/note/index.js'\n\nexport default {\n  data() {\n    return {\n      title: '',\n      tagValues: [],\n      noteContent: '',\n      tagOptions: ['HTML', 'MySQL', 'PHP', 'Java', 'Python'],\n      uploadUrl: '',\n      fileList: [],\n      fileNameMatch: ['jpeg', 'jpg', 'png']\n    }\n  },\n  components: { Editor },\n  methods: {\n    /**\n     * 实际提交数据方法\n     */\n    async submitNoteData(param) {\n      if (this.$refs.editor.isNeedUpload()) {\n        // 如果笔记内有图片，那么先进行图片上传\n        await this.$refs.editor.uploadimg()\n      }\n\n      // 对多个tag进行转换数据格式\n      const tags = this.tagValues.join(',')\n\n      const formData = new FormData()\n\n      // 如果地址栏上有groupId，证明是分组内提交的\n      const id = this.$route?.query.groupId\n      if (id) formData.append('groupId', id)\n\n      formData.append('noteImg', param.file)\n      formData.append('title', this.title)\n      formData.append('content', this.noteContent)\n      formData.append('tag', tags)\n      formData.append('userId', this.$store.state.userInfo.userid)\n\n      saveNoteData(formData).then(() => {\n        this.$message.success('Note posted successfully')\n        id\n          ? this.$router.push(`/group?id=${id}&page=1`)\n          : this.$router.push('/')\n      })\n    },\n    validateNoteInfo() {\n      if (\n        this.title == '' ||\n        this.tagValues.length === 0 ||\n        this.noteContent == '' ||\n        this.$refs.upload.uploadFiles.length == 0\n      ) {\n        this.$message.warning('The information is not complete, please check')\n        return false\n      }\n      return true\n    },\n    handleSubmitNote() {\n      if (this.validateNoteInfo()) {\n        // 调用upload组件的上传方法，在它内部做提交\n        this.$refs.upload.submit()\n      }\n    },\n    checkFile(file) {\n      //上传之前的操作，file上传的文件对象\n      let name = file.name\n      if (name.lastIndexOf('.') == -1) {\n        this.$message.warning('file format is incorrect')\n        return false\n      } else {\n        //获取后缀\n        let suff = name.substring(name.lastIndexOf('.') + 1)\n        var count = 0\n        //遍历提前定义好的后缀数组\n        for (var i in this.fileNameMatch) {\n          //如果有匹配的(注意大小写问题)\n          if (this.fileNameMatch[i].toLowerCase() == suff.toLowerCase()) {\n            count++\n            //匹配到就退出循环\n            break\n          }\n        }\n        //如果没匹配到\n        if (count == 0) {\n          this.$message.warning('Only images in jpg, png, jpeg format can be uploaded')\n          return false\n        }\n      }\n\n      //判断文件大小\n      if (file.size > 1024 * 1024 * 10) {\n        this.$message.warning('The file size cannot exceed 10MB')\n        return false\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"less\" scoped>\n.submit-note-content {\n  flex: 1;\n  background: #fff;\n  border-radius: 5px;\n  border: 1px solid #dcdcdc;\n  border-bottom: none;\n  padding: 10px;\n\n  .require {\n    &::before {\n      content: '*';\n      color: #f56c6c;\n      margin-right: 4px;\n    }\n  }\n\n  .title {\n    & > span {\n      margin-right: 20px;\n    }\n    margin-bottom: 15px;\n  }\n\n  .tag {\n    & > span {\n      margin-right: 24px;\n    }\n    margin-bottom: 15px;\n  }\n\n  .content {\n    .content-title {\n      margin-bottom: 10px;\n    }\n    margin-bottom: 15px;\n  }\n  .upload {\n    & > span {\n      margin-right: 24px;\n      margin-top: 5px;\n    }\n    display: flex;\n    align-items: flex-start;\n    margin-top: 5px;\n    height: 80px;\n    margin-bottom: 5px;\n  }\n\n  .submit {\n    display: flex;\n    justify-content: center;\n    align-items: center;\n  }\n}\n</style>\n"]}]}